# API Delta Log

| Endpoint (Dokumen) | Saat Ini (Repo) | Seharusnya (Dokumen) | Aksi |
| --- | --- | --- | --- |
| `GET /api/python-coding-lab/tasks` | Tidak ada handler khusus; rute terdekat `GET /api/v2/coding-lab/tasks` (`internal/router/router.go`, `internal/handler/coding_task_handler.go`) hanya memerlukan filter opsional dan tidak memvalidasi `studentId`. | Wajib `studentId` query dan tetap menggunakan path `"/api/python-coding-lab/tasks"` untuk backward compatibility. | Tambahkan alias versi v2 + validasi `studentId` sebelum meneruskan ke service; update doc setelah path final. |
| `GET /api/python-coding-lab/tasks/[slug]` | Implementasi saat ini `GET /api/v2/coding-lab/tasks/:id` (numeric ID). Tidak ada dukungan slug maupun `studentId` guard. | Endpoint slug yang mengembalikan task + submissions terbaru, param `studentId` wajib. | Tambahkan handler slug (atau translator slug→ID) serta guard query; catat fallback 302 sementara jika path berganti. |
| `POST /api/python-coding-lab/submit` | Submission dibuat lewat `POST /api/v2/coding-lab/submissions` (`internal/handler/coding_submission_handler.go`) dengan payload `{ task_id, language, source }` dan student berasal dari JWT. | Payload `{ taskId, code, studentId }` sesuai dokumentasi Python Lab; mendukung login custom tanpa JWT. | Seragamkan DTO (alias field + validasi studentId eksplisit) atau perbarui doc; sediakan 302/back-compat. |
| `GET /api/python-coding-lab/submissions` | Tidak ada endpoint listing; hanya `GET /api/v2/coding-lab/submissions/:id`. | Endpoint riwayat submissions per `studentId` (opsional `taskId`). | Implementasikan list handler yang membaca `studentId` query & RBAC student; tambahkan kontrak JSON schema. |
| `/api/sessions/**` (mis. `POST /api/sessions/[code]/submit`) | Router (`internal/router/router.go`) sama sekali tidak menurunkan grup `/api/sessions`. | Seluruh flow sessions/quiz (join, submit, start, next, finish) tersedia dengan RBAC admin/student. | Tambahkan handler + middleware sesuai Phase P4 atau tandai doc sebagai legacy & buat rencana implementasi. |
| `GET /api/tutorial/articles`, `/api/tutorial/projects`, dll. | Namespace tutorial yang ada hanyalah `/api/v2/tutorial/assignments` & `/submissions`; tidak ada handler articles/projects (`internal/handler` tidak memiliki file terkait). | Artikel/proyek publik (GET) + admin create (POST), termasuk pagination/filter default. | ✅ Ditambahkan `TutorialContentHandler` (public + admin) dengan service/repo Go lengkap, pagination (page/pageSize/sort/search/tags), caching optional, serta schema baru (`internal/dto/tutorial_content_dto.go`). |
| `/api/admin/contacts`, `/api/admin/profile`, `/api/admin/settings`, `/api/admin/users`, `/api/admin/web-lab/**` | Grup admin saat ini hanya mencakup `/students`, `/assignments`, `/submissions`, `/analytics`, `/activities`. Tidak ada handler untuk kontak/profile/settings/users/web-lab (`internal/handler` tidak mengandung file terkait). | Semua path admin pada dokumen tersedia, RBAC admin-only, envelope standar, masking PII. | ✅ `/api/admin/contacts` sudah tersedia (handler + service baru) termasuk masking PII, pagination, dan meta response. Endpoint admin lain (profile/settings/users/web-lab) masih berada di backlog. |
| `POST /api/chat/send`, `/api/chat/sse`, `/api/chat/admin-reply` | Chat handler (`internal/handler/chat_handler.go`) hanya menyediakan `GET /api/v2/chat/ws` (WebSocket) dan `GET /api/v2/chat/history`. Tidak ada SSE atau HTTP send endpoints. | Kombinasi REST (send/admin reply) + SSE stream sebagaimana dokumen. | Putuskan transport (WebSocket vs SSE). Jika SSE tetap, perlu endpoint HTTP + event-stream; jika dokumen usang, update doc & OpenAPI. |
| `/api/discussion/threads` (GET/POST saja di dokumen) | Implementasi berada di `/api/v2/discussion/...` dan sudah mendukung PUT, DELETE, pagination, dan memerlukan JWT (`internal/handler/discussion_handler.go`). | Dokumen hanya menuliskan GET/POST tanpa versi path. | Harmonisasi path (`/api/v2/...`) + dokumentasikan operasi PUT/DELETE + RBAC; atau sediakan alias non-v2 untuk kompatibilitas. |
| `/api/auth/*` (NextAuth + student login/register) | Backend Go tidak mengekspos rute auth apa pun; hanya middleware JWT (`internal/middleware/jwt.go`). | Admin login via NextAuth (`/api/auth/[...nextauth]`), student login/register custom endpoints. | Tentukan boundary auth (Next.js vs Go). Bila Go harus melayani, tambahkan handler; bila tidak, update doc agar menunjuk service auth sebenarnya. |
| `/api/seed` (+ `/roadmap`, `/students`, `/classroom`, `/assignments`) | Seed handler saat ini hanya menyediakan `POST /api/seed/announcements` dan `/api/seed/gallery` dengan header `X-Seed-Token`. | Serangkaian endpoint seed tambahan sesuai dokumen. | Tambah modul seed sesuai prioritas atau tandai doc usang; wajibkan secret & idempotensi sesuai Phase P8. |
| `POST /api/upload` (signature) | Handler (`internal/handler/upload_handler.go`) menerima file upload langsung (multipart) dan mengirim ke storage. | Dokumen menyebut endpoint hanya mengembalikan signature Cloudinary untuk upload langsung dari FE. | Klarifikasi alur: jika signature yang diinginkan, pisahkan endpoint baru `/api/upload/signature`; jika file upload dipertahankan, update dokumen agar menjelaskan behavior sekarang. |
| `GET /api/public` + CRUD `/api/contact` | Tidak ada aggregator `/api/public`; data publik tersebar di `/api/activities`, `/api/announcements`, `/api/gallery`. `ContactHandler` hanya menyediakan `POST /api/contact` (payload honeypot). | Endpoint publik tunggal untuk landing + admin contact CRUD (GET/POST/PATCH/DELETE). | Putuskan apakah aggregator perlu ditambahkan atau dokumentasi diperbarui; tambahkan route GET contact listing (admin) bila dibutuhkan oleh FE. |
| `/api/student/*` (web-lab, preferences, profile, etc.) | Namespace `/api/v2/student` hanya menyediakan `GET /dashboard` (`internal/handler/student_dashboard_handler.go`). | Dokumen menuntut banyak endpoint student (web-lab, preferences, profile, change-password, progress). | Susun backlog implementasi per fitur student atau tandai doc sebagai legacy; buat flag/rilis bertahap agar RBAC & envelope konsisten. |
